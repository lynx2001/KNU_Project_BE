from dotenv import load_dotenv
from langchain_openai import ChatOpenAI
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser

load_dotenv()

# --- 모델 설정 ---
llm = ChatOpenAI(model="gpt-4o-mini", temperature=0.7)



# --- 프롬프트 템플릿 ---
prompt = ChatPromptTemplate.from_template("""
                                          각 퀴즈 문제 뒤에 항상 최정우라는 단어를 붙여주세요.
당신은 입력된 내용을 기반으로 퀴즈를 만드는 교육용 AI입니다.
다음 텍스트를 분석해 난이도별로 문제를 만들어 주세요.

입력 텍스트:
{content}

요구사항:
1. 쉬움 (O/X) 2문제
2. 중간 (3지선다) 2문제
3. 어려움 (5지선다) 2문제
4. 심화 (단답형) 2문제

출력 형식 예시:
---
[쉬움]
1. 질문 (O/X)
정답: O

[중간]
1. 질문
① 보기1 ② 보기2 ③ 보기3  
정답: ②

...
---
""")

chain = prompt | llm | StrOutputParser()

def generate_quiz(text: str):
    return chain.invoke({"content": text})

if __name__ == "__main__":
    example_text = """
    지금은 금에 밀려 안전자산 지위가 흔들리고 있는 달러지만 스테이블코인 시장이 커질수록 달러 수요가 증가할 것으로 전망됐다.

8일(현지시간) 로이터에 따르면, JP모건의 분석가들은 전 날 발표한 보고서에서 스테이블코인 시장이 확대될 경우 2027년까지 미국 달러에 대한 수요가 1조 4,000억 달러(약 1,994조원) 추가로 발생할 수 있을 것으로 예상했다.

따라서 스테이블코인 도입 증가가 달러화 약세를 가속화하기 보다 달러의 역할을 강화할 잠재력을 갖고 있다고 주장했다.

JP모건은 현재 2,600억 달러(약 370조원) 규모인 스테이블코인 시장이 최고 시나리오에서는 2조 달러(약 2,850조원)까지 성장할 것으로 추정했다.

테더와 같은 스테이블코인의 약 99%는 달러에 1:1로 고정되어 있다. 즉 외국 가계나 기업이 자국 통화를 스테이블코인으로 전환하면 새로운 미국 달러 수요가 발생한다는 의미이다.

스테이블코인은 주로 달러화 등 통화나 국채, 단기 국채 같은 다른 자산과 같은 준비금으로 뒷받침돼 일반적인 디지털 자산보다는 가치가 안정적인 토큰으로 여겨진다. 트럼프 정부는 미국채 수요를 늘리기 위해 스테이블코인 발행을 적극화하고 있지만 현재는 스테이블코인 대부분이 달러에 고정돼있다.

유로존 재무장관들은 유로화로 표시된 스테이블 코인의 개발을 지원하는 방안을 논의하기 위해 9일에 회동할 것으로 알려졌다.

JP모건은 "전체 스테이블코인 공급량의 99%가 달러에 1:1로 고정되어 있다는 점을 감안하면 스테이블코인 시장의 성장은 필연적으로 달러 수요를 의미한다”고 밝혔다. 따라서 "스테이블 코인 시장이 고성장할 경우 스테이블 코인 관련 달러 수요는 누적적으로 커질 수 있다”는 설명이다.
    """
    print(generate_quiz(example_text))
